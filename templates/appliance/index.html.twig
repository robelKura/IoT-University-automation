{% extends 'base.html.twig' %}

{% block title %}Appliance index{% endblock %}

{% block body %}
    <h1>Appliance index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Type</th>
                <th>Location</th>
                <th>Status</th>
                {% if is_granted('ROLE_ADMIN') %}
                {% else %}
                <th>actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
        {% for appliance in appliances %}
            <tr>
                <td>{{ appliance.id }}</td>
                <td>{{ appliance.name }}</td>
                <td>{{ appliance.type }}</td>
                <td>{{ appliance.location }}</td>
                <td>{{ appliance.status ? 'ON' : 'OFF' }}</td>
                <td>
                    {% if is_granted('ROLE_ADMIN') %}
                    {% else %}
                    {# <a href="{{ path('appliance_show', {'id': appliance.id}) }}">show</a> #}
                    <form class="d-inline" method="post">
                        {# <input type="toggle" name="enable" value="{{appliance.id}}"> #}
                        
                        <button class="btn btn-info btn-sm" name="activate" title="activate" value="{{appliance.id}}">
                            {% if appliance.status %}
                            <i class="fa fa-times"></i>
                            {% else %}
                            <i class="fa fa-check"></i>
                            {% endif %}
                        </button>
                    </form>
                    {% endif %}
                    {# <a href="{{ path('appliance_edit', {'id': appliance.id}) }}">edit</a> #}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% if is_granted('ROLE_ADMIN') %}
    <a href="{{ path('appliance_new') }}">Create new</a>
    {% endif %}
{% endblock %}
